<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:vh="http://typo3.org/ns/RKW/RkwRegistration/ViewHelpers"
    data-namespace-typo3-fluid="true">

    <f:layout name="Default" />
    <f:section name="main">

        <f:render partial="FlashMessages" arguments="{_all}" />

        <f:security.ifAuthenticated>
            <f:then>

                <f:comment><!-- AUTHENTICATED AREA --></f:comment>

                <div class="alternatives">

                    <f:link.external
                        class="btn btn--primary"
                        uri='<vh:link.myRkwLink pageUid="{settings.users.loginPid}" />'
                        target="{linkTargetLogin}"
                    >
                        <f:translate key="templates_registration_loginShowExternal.login2" />
                    </f:link.external>

                    <div class="alternatives__item alternatives__item--between">
                        <f:translate key="templates_registration_loginShowExternal.orLabel" />
                    </div>

                    <div class="alternatives__item">

                        <f:if condition="<vh:isUserAnonymous frontendUser='{frontendUser}'/>">
                            <f:then>
                                <f:link.action
                                    class="btn btn--secondary"
                                    action="logoutExternal"
                                >
                                    <f:translate key="templates_registration_loginShowExternal.logout" />
                                </f:link.action>
                            </f:then>
                            <f:else>
                                <f:link.external
                                    class="btn btn--secondary"
                                    uri='<vh:link.myRkwLink pageUid="{settings.users.logoutPid}" />'
                                    target="{linkTargetLogout}"
                                >
                                    <f:translate key="templates_registration_loginShowExternal.logout" />
                                </f:link.external>

                            </f:else>
                        </f:if>
                    </div>
                </div>

            </f:then>

            <f:else>

                <f:comment><!-- NOT AUTHENTICATED AREA --></f:comment>

                <f:if condition="{settings.users.allowAnonymousLogin}">
                    <f:then>

                        <!-- with anonymous login -->
                        <div class="alternatives">
                            <div class="alternatives__item">
                                <f:render section="login" />
                                <f:render section="register" />
                            </div>

                            <div class="alternatives__item alternatives__item--between">
                                <f:translate key="templates_registration_loginShowExternal.orLabel" />
                            </div>

                            <div class="alternatives__item">
                                <h3 class="h5"><f:translate key="templates_registration_loginShowExternal.anonymousLabel" /></h3>
                                <f:link.action
                                    class="btn btn--secondary"
                                    action="loginAnonymous"
                                >
                                    <f:translate key="templates_registration_loginShowExternal.anonymous" />
                                </f:link.action>
                            </div>

                        </div>
                    </f:then>

                    <f:else>

                        <!-- without anonymous login -->
                        <div class="alternatives">
                            <div class="alternatives__item">
                                <f:render section="login" />
                            </div>

                            <div class="alternatives__item alternatives__item--between">
                                <f:translate key="templates_registration_loginShowExternal.orLabel" />
                            </div>

                            <div class="alternatives__item">
                                <f:render section="register" />
                            </div>
                        </div>
                    </f:else>
                </f:if>
            </f:else>
        </f:security.ifAuthenticated>


    </f:section>



    <f:comment><!-- SECTION "register" --></f:comment>
    <f:section name="register">
        <h3 class="h5"><f:translate key="templates_registration_loginShowExternal.registerLabel" /></h3>

        <f:link.external
            class="btn btn--primary"
            uri='<vh:link.myRkwLink pageUid="{settings.users.registrationPid}" />'
            target="{linkTargetLogin}"
        >
            <f:translate key="templates_registration_loginShowExternal.register" />
        </f:link.external>
    </f:section>



    <f:comment><!-- SECTION "login" --></f:comment>
    <f:section name="login">
        <h3 class="h5"><f:translate key="templates_registration_loginShowExternal.loginLabel" /></h3>

        <f:link.external
            class="btn btn--primary"
            uri='<vh:link.myRkwLink pageUid="{settings.users.loginPid}" />'
            target="{linkTargetLogin}"
        >
            <f:translate key="templates_registration_loginShowExternal.login" />
        </f:link.external>
    </f:section>

</html>